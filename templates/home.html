{% extends 'base.html' %}
{% block title %}Home ‚Äì Arihant Granites{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative min-h-screen bg-gradient-to-br from-amber-900 via-yellow-800 to-amber-700 overflow-hidden">
  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-10">
    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent transform -skew-y-12 animate-pulse"></div>
    <div class="absolute inset-0 bg-gradient-to-l from-transparent via-yellow-200 to-transparent transform skew-y-12 animate-pulse" style="animation-delay: 1s;"></div>
  </div>
  
  <!-- Hero Content -->
  <div class="relative z-10 flex items-center justify-center text-center text-white px-4 h-full">
    <div class="max-w-4xl mx-auto">
      <!-- Logo -->
      <div class="mb-8 animate-fade-in-up">
        <img src="/static/img/logo.png" alt="Arihant Granite Logo" class="w-48 h-48 bg-white p-2 mx-auto" />
      </div>
      
      <!-- Title -->
      <div class="mb-6">
        <h1 class="text-5xl md:text-7xl font-extrabold drop-shadow-2xl mb-4 animate-fade-in-up">
          <span class="bg-gradient-to-r from-red-500 via-lavender-100 to-blue-300 bg-clip-text text-transparent animate-gradient-x">
            Arihant Granites
          </span>
        </h1>
        <p class="text-2xl text-gray-800">
          Quality At Your Feet!
        </p>
      </div>
      
      <!-- CTA Buttons -->
      <div class="flex flex-col md:flex-row gap-4 justify-center animate-fade-in-up-delay-2">
        <a href="#featured-collection" class="group bg-yellow-300 text-pink-700 px-8 py-4 rounded-lg font-semibold hover:bg-amber-800 hover:scale-105 transition-all duration-300 shadow-xl">
          
            Explore Collection
          </span>
          
            
          </a>
        
        <a href="/contact" class="group bg-purple-600 text-white px-8 py-4 rounded-lg font-semibold hover:bg-purple-700 hover:scale-105 transition-all duration-300 shadow-xl">
      <span class="flex items-center gap-2 text-lg">
            Get Quote
          </span>
          
        </a>
      </div>
    </div>
  </div>
  
  <!-- Scroll Indicator -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
    <div class="w-6 h-10 border-2 border-white rounded-full flex justify-center">
      <div class="w-1 h-3 bg-white rounded-full mt-2 animate-pulse"></div>
    </div>
  </div>
</section>

<!-- Statistics Section -->
<section class="py-16 bg-gradient-to-r from-amber-50 to-yellow-50 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-r from-amber-100/20 to-yellow-100/20"></div>
  <div class="container mx-auto px-4 relative z-10">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-amber-800 mb-8">Trusted by Industry Leaders</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
        <div class="text-center group">
          <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="500">500+</div>
          <div class="text-lg text-amber-800 font-semibold">Projects Completed</div>
          <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
        </div>
        <div class="text-center group">
          <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="100">100%</div>
          <div class="text-lg text-amber-800 font-semibold">Natural Stone</div>
          <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
        </div>
        <div class="text-center group">
          <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="15">15+</div>
          <div class="text-lg text-amber-800 font-semibold">Years Experience</div>
          <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
        </div>
        <div class="text-center group">
          <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="50">50+</div>
          <div class="text-lg text-amber-800 font-semibold">Happy Customers</div>
          <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Animated Statistics Section -->
<section class="py-16 bg-gradient-to-r from-amber-50 to-yellow-50 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-r from-amber-100/20 to-yellow-100/20"></div>
  <div class="container mx-auto px-4 relative z-10">
    <h2 class="text-4xl font-bold text-center mb-12 text-amber-800">Our Achievements</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
      <div class="text-center group">
        <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="500">100+</div>
        <div class="text-lg text-amber-800 font-semibold">Projects Completed</div>
        <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
      </div>
      <div class="text-center group">
        <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="100">50+</div>
        <div class="text-lg text-amber-800 font-semibold">Granite Varieties</div>
        <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
      </div>
      <div class="text-center group">
        <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="50">15+</div>
        <div class="text-lg text-amber-800 font-semibold">Years Experience</div>
        <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
      </div>
      <div class="text-center group">
        <div class="text-5xl md:text-6xl font-bold text-amber-600 mb-2 counter" data-target="1000">50+</div>
        <div class="text-lg text-amber-800 font-semibold">Experienced Team</div>
        <div class="w-16 h-1 bg-amber-400 mx-auto mt-2 group-hover:w-24 transition-all duration-300"></div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Granite Collection -->
<section id="featured-collection" class="py-16 container mx-auto px-4">
  <div class="text-center mb-12">
    <h2 class="kesariya-title text-4xl mb-4 animate-fade-in-up">Featured Granite Collection</h2>
    <p class="text-xl text-gray-600 max-w-3xl mx-auto animate-fade-in-up">
      Discover our handpicked selection of premium granite varieties, each piece carefully selected for its unique beauty and exceptional quality
    </p>
  </div>
  
  
   
  
  <!-- Featured Products Grid -->
  <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory" id="featured-carousel">
    {% for item in featured %}
    <div class="kesariya-card min-w-[320px] snap-center group cursor-pointer collection-item" 
         data-category="{{ item.category.lower().replace(' collection', '') }}"
         onclick="showProductModal('{{ item.title }}', '{{ item.image }}', '{{ item.description }}', '{{ item.price_range }}')">
      <div class="relative overflow-hidden">
        <img src="{{ item.image }}" class="h-48 w-full object-cover group-hover:scale-105 transition-transform duration-300" alt="{{ item.title }}" loading="lazy">
        <div class="absolute top-2 right-2 bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg">
          {{ item.category }}
        </div>
        {% if item.availability == 'Limited Stock' %}
        <div class="absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg animate-pulse">
          Limited Stock
        </div>
        {% endif %}
      </div>
      <div class="p-4">
        <h3 class="kesariya-title text-lg group-hover:text-indigo-600 transition-colors duration-200">{{ item.title }}</h3>
        <p class="text-sm text-yellow-700 font-medium mb-3">{{ item.category }}</p>
        <p class="text-sm text-gray-600 line-clamp-2">{{ item.description }}</p>
        <div class="space-y-3 mb-4">
          <div class="flex items-center justify-between">
            <span class="text-yellow-700 font-bold text-sm">Availability</span>
            <span class="text-sm font-medium {% if item.availability == 'In Stock' %}text-green-600{% else %}text-red-600{% endif %}">
              {{ item.availability }}
            </span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-gray-500 text-sm">Thickness</span>
            <span class="text-gray-700 font-medium text-sm">{{ item.thickness }}</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-gray-500 text-sm">Finish</span>
            <span class="text-gray-700 font-medium text-sm">{{ item.finish }}</span>
          </div>
        </div>

        </button>
      </div>
    </div>
    {% endfor %}
  </div>
  
  <!-- Collection Stats -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-12">
    <div class="text-center reveal">
      <div class="text-3xl font-bold text-amber-600 mb-2">4.9</div>
      <div class="text-sm text-gray-600">Average Rating</div>
    </div>
    <div class="text-center reveal">
      <div class="text-3xl font-bold text-amber-600 mb-2">500+</div>
      <div class="text-sm text-gray-600">Happy Customers</div>
    </div>
    <div class="text-center reveal">
      <div class="text-3xl font-bold text-amber-600 mb-2">98%</div>
      <div class="text-sm text-gray-600">Satisfaction Rate</div>
    </div>
    <div class="text-center reveal">
      <div class="text-3xl font-bold text-amber-600 mb-2">15+</div>
      <div class="text-sm text-gray-600">Years Experience</div>
    </div>
    <div class="text-center reveal">
      <div class="text-3xl font-bold text-amber-600 mb-2">500+</div>
      <div class="text-sm text-gray-600">Happy Customers</div>
    </div>
  </div>
</section>

<!-- Recent Reviews from Database -->
{% if recent_reviews %}
  <div class="mt-16">
    <h3 class="kesariya-title text-2xl mb-8 text-center">Recent Customer Reviews</h3>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for review in recent_reviews %}
        <div class="kesariya-card p-6 reveal group hover:scale-105 transition-all duration-300">
          <div class="flex text-yellow-400 mb-3">
            {% for i in range(review[1]) %}
              <span class="text-lg">‚≠ê</span>
            {% endfor %}
          </div>
          <div class="ml-2 text-sm text-gray-500">{{ review[1] }}/5</div>
          </div>
          <div class="flex-1">
            <p class="italic text-gray-700 mb-6 leading-relaxed">{{ review[2] }}</p>
            <div class="flex items-center">
              <div class="w-10 h-10 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">
                {{ review[0][0] }}
              </div>
              <div>
                <div class="font-semibold text-yellow-800">{{ review[0] }}</div>
                <div class="text-sm text-gray-500">Verified Customer</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  </div>
{% endif %}

<!-- Product Modal -->
<div id="product-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
  <div class="bg-white rounded-xl shadow-xl max-w-lg w-full p-6 relative m-4">
    <button onclick="closeProductModal()" class="absolute top-2 right-2 text-2xl text-gray-500 hover:text-gray-700">&times;</button>
    <img id="modal-img" src="" class="w-full h-64 object-cover rounded mb-4" alt="Product image">
    <h2 id="modal-title" class="text-2xl kesariya-title mb-2"></h2>
    <p id="modal-desc" class="mb-4 text-gray-600"></p>
    <p id="modal-price" class="text-yellow-700 font-bold mb-4"></p>
    <div class="flex gap-2">
      <button class="kesariya-btn flex-1">Get Quote</button>
      <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300 flex-1">Contact Us</button>
    </div>
  </div>
</div>

<!-- Interactive Gallery Section -->
<section class="py-16 bg-gradient-to-br from-gray-50 to-amber-50">
  <div class="container mx-auto px-4">
    <h2 class="kesariya-title text-4xl mb-12 text-center reveal">Our Granite Gallery</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      {% for item in featured %}
      <div class="gallery-item group cursor-pointer reveal" onclick="openLightbox('{{ item.image }}', '{{ item.title }}', '{{ item.description }}')">
        <div class="relative overflow-hidden rounded-lg shadow-lg">
          <img src="{{ item.image }}" class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500" alt="{{ item.title }}">
          <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center">
            <div class="text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-center">
              <svg class="w-8 h-8 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
              <p class="text-sm font-semibold">View Details</p>
            </div>
          </div>
        </div>
    </div>
    {% endfor %}
    </div>
  </div>
</section>

<!-- Lightbox Modal -->
<div id="lightbox" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden">
  <div class="relative max-w-4xl max-h-[90vh] p-4">
    <button onclick="closeLightbox()" class="absolute top-4 right-4 text-white text-3xl hover:text-yellow-400 transition-colors duration-300 z-10">
      &times;
    </button>
    <img id="lightbox-img" src="" class="max-w-full max-h-[70vh] object-contain rounded-lg" alt="Gallery image">
    <div class="text-center mt-4">
      <h3 id="lightbox-title" class="text-2xl font-bold text-white mb-2"></h3>
      <p id="lightbox-desc" class="text-gray-300"></p>
    </div>
  </div>
</div>

<!-- Our Process -->
<section class="py-20 bg-gradient-to-br from-gray-900 via-amber-900 to-yellow-800 text-white">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-5xl font-bold mb-6 animate-fade-in-up">How We Work</h2>
      <p class="text-xl text-yellow-100 max-w-3xl mx-auto animate-fade-in-up-delay">
        Our proven 6-step process ensures you get the perfect granite for your project, from initial consultation to final installation
      </p>
    </div>
    
    <!-- Process Steps -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      <div class="process-step reveal group">
        <div class="relative">
          <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform duration-300">
            ‚õèÔ∏è
          </div>
          <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">
            1
          </div>
        </div>
        <h3 class="text-2xl font-bold mb-4">Sourcing & Selection</h3>
        <p class="text-gray-300 mb-4">We personally visit quarries across India to select the finest granite blocks. Our experts evaluate each stone for quality, color consistency, and structural integrity.</p>
        <ul class="text-sm text-yellow-200 space-y-1">
          <li>‚Ä¢ Direct quarry partnerships</li>
          <li>‚Ä¢ Quality inspection at source</li>
          <li>‚Ä¢ Premium block selection</li>
        </ul>
      </div>
      
      <div class="process-step reveal group">
        <div class="relative">
          <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform duration-300">
            üî¨
          </div>
          <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">
            2
          </div>
        </div>
        <h3 class="text-2xl font-bold mb-4">Quality Testing</h3>
        <p class="text-gray-300 mb-4">Every granite block undergoes rigorous testing for hardness, water absorption, and chemical resistance to ensure it meets international standards.</p>
        <ul class="text-sm text-yellow-200 space-y-1">
          <li>‚Ä¢ Hardness testing (Mohs scale)</li>
          <li>‚Ä¢ Water absorption tests</li>
          <li>‚Ä¢ Chemical resistance checks</li>
        </ul>
      </div>
      
      <div class="process-step reveal group">
        <div class="relative">
          <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform duration-300">
            ‚öôÔ∏è
          </div>
          <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">
            3
          </div>
        </div>
        <h3 class="text-2xl font-bold mb-4">Precision Processing</h3>
        <p class="text-gray-300 mb-4">Using state-of-the-art Italian machinery, we cut and polish each slab to perfection. Our skilled craftsmen ensure consistent thickness and flawless finish.</p>
        <ul class="text-sm text-yellow-200 space-y-1">
          <li>‚Ä¢ Italian cutting technology</li>
          <li>‚Ä¢ Precision calibration</li>
          <li>‚Ä¢ Multiple finish options</li>
        </ul>
      </div>
      
      <div class="process-step reveal group">
        <div class="relative">
          <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform duration-300">
            üé®
          </div>
          <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">
            4
          </div>
        </div>
        <h3 class="text-2xl font-bold mb-4">Custom Design</h3>
        <p class="text-gray-300 mb-4">Our design team works with you to create custom solutions. We provide 3D visualizations and material samples to help you make the perfect choice.</p>
        <ul class="text-sm text-yellow-200 space-y-1">
          <li>‚Ä¢ 3D design visualization</li>
          <li>‚Ä¢ Material samples</li>
          <li>‚Ä¢ Custom sizing options</li>
        </ul>
      </div>
      
      <div class="process-step reveal group">
        <div class="relative">
          <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform duration-300">
            ‚úÖ
          </div>
          <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">
            5
          </div>
        </div>
        <h3 class="text-2xl font-bold mb-4">Quality Assurance</h3>
        <p class="text-gray-300 mb-4">Before dispatch, every piece undergoes final inspection. We check for any defects, ensure proper packaging, and prepare detailed documentation.</p>
        <ul class="text-sm text-yellow-200 space-y-1">
          <li>‚Ä¢ Final quality inspection</li>
          <li>‚Ä¢ Secure packaging</li>
          <li>‚Ä¢ Quality certificates</li>
        </ul>
      </div>
      
      <div class="process-step reveal group">
        <div class="relative">
          <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform duration-300">
            üöö
          </div>
          <div class="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">
            6
          </div>
        </div>
        <h3 class="text-2xl font-bold mb-4">Delivery & Installation</h3>
        <p class="text-gray-300 mb-4">We handle safe transportation and can provide professional installation services. Our team ensures your granite is delivered on time and installed perfectly.</p>
        <ul class="text-sm text-yellow-200 space-y-1">
          <li>‚Ä¢ Safe transportation</li>
          <li>‚Ä¢ Professional installation</li>
          <li>‚Ä¢ Post-installation support</li>
        </ul>
      </div>
    </div>
    
    <!-- Process Timeline -->
    <div class="mt-16 bg-white bg-opacity-10 rounded-2xl p-8 reveal">
      <h3 class="text-2xl font-bold text-center mb-8">Project Timeline</h3>
      <div class="grid md:grid-cols-4 gap-6 text-center">
        <div class="timeline-item">
          <div class="text-3xl font-bold text-yellow-400 mb-2">1-2 Days</div>
          <div class="text-sm text-gray-300">Consultation & Design</div>
        </div>
        <div class="timeline-item">
          <div class="text-3xl font-bold text-yellow-400 mb-2">3-5 Days</div>
          <div class="text-sm text-gray-300">Processing & Cutting</div>
        </div>
        <div class="timeline-item">
          <div class="text-3xl font-bold text-yellow-400 mb-2">1-2 Days</div>
          <div class="text-sm text-gray-300">Quality Check</div>
        </div>
        <div class="timeline-item">
          <div class="text-3xl font-bold text-yellow-400 mb-2">1-3 Days</div>
          <div class="text-sm text-gray-300">Delivery & Installation</div>
        </div>
    </div>
    </div>
  </div>
</section>

<section class="py-12 container mx-auto px-4 granite-bg rounded-lg my-8">
  <h2 class="kesariya-title text-2xl mb-4">Why Choose Us</h2>
  <ul class="list-disc pl-8 text-lg space-y-2">
    <li>Wide variety of premium granites sourced directly from our factory.</li>
    <li>State-of-the-art processing and quality control.</li>
    <li>Experienced team with decades in the granite industry.</li>
    <li>Custom solutions for residential, commercial, and export needs.</li>
    <li>Timely delivery and transparent pricing.</li>
    <li>Trusted by architects, builders, and homeowners across India.</li>
  </ul>
</section>

<!-- Back to Top Button -->
<button onclick="window.scrollTo({top:0,behavior:'smooth'})" class="fixed bottom-6 right-6 kesariya-btn shadow-lg z-50">‚Üë Top</button>

<script>
// JavaScript Functions
function showProductModal(title, image, description, price) {
    document.getElementById('modal-title').textContent = title;
    document.getElementById('modal-img').src = image;
    document.getElementById('modal-desc').textContent = description;
    document.getElementById('modal-price').textContent = price;
    document.getElementById('product-modal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeProductModal() {
    document.getElementById('product-modal').classList.add('hidden');
    document.body.style.overflow = 'auto';
}

// Lightbox Functions
function openLightbox(imageSrc, title, description) {
    document.getElementById('lightbox-img').src = imageSrc;
    document.getElementById('lightbox-title').textContent = title;
    document.getElementById('lightbox-desc').textContent = description;
    document.getElementById('lightbox').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeLightbox() {
    document.getElementById('lightbox').classList.add('hidden');
    document.body.style.overflow = 'auto';
}

// Collection Filter Functionality
function filterCollection(category) {
    const filterButtons = document.querySelectorAll('.collection-filter');
    const collectionItems = document.querySelectorAll('.collection-item');
    
    filterButtons.forEach(button => {
        button.classList.remove('active');
        if (button.getAttribute('data-category') === category) {
            button.classList.add('active');
        }
    });
    
    collectionItems.forEach(item => {
        if (category === 'all' || item.getAttribute('data-category').includes(category)) {
            item.style.display = 'block';
            item.style.animation = 'fadeInUp 0.5s ease-out';
        } else {
            item.style.display = 'none';
        }
    });
}

// Testimonial Carousel Functionality
let currentTestimonial = 0;
const testimonialsPerView = window.innerWidth < 768 ? 1 : window.innerWidth < 1024 ? 2 : 3;

function initTestimonialCarousel() {
    const slider = document.getElementById('testimonial-slider');
    const slides = document.querySelectorAll('.testimonial-slide');
    const totalSlides = slides.length;
    
    if (totalSlides === 0) return;
    
    function updateSlider() {
        const translateX = -currentTestimonial * (100 / testimonialsPerView);
        slider.style.transform = 'translateX(' + translateX + '%)';
    }
    
    updateSlider();
    
    // Auto-advance testimonials
    setInterval(() => {
        currentTestimonial = (currentTestimonial + 1) % Math.max(1, totalSlides - testimonialsPerView + 1);
        updateSlider();
    }, 5000);
}

function nextTestimonial() {
    const slides = document.querySelectorAll('.testimonial-slide');
    const totalSlides = slides.length;
    const maxSlide = Math.max(0, totalSlides - testimonialsPerView);
    
    currentTestimonial = Math.min(currentTestimonial + 1, maxSlide);
    initTestimonialCarousel();
}

function previousTestimonial() {
    currentTestimonial = Math.max(currentTestimonial - 1, 0);
    initTestimonialCarousel();
}

// Counter Animation
function animateCounters() {
    const counters = document.querySelectorAll('.counter');
    counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-target'));
        const duration = 2000;
        const increment = target / (duration / 16);
        let current = 0;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            counter.textContent = Math.floor(current);
        }, 16);
    });
}

// Scroll Reveal Animation
function initScrollReveal() {
    const reveals = document.querySelectorAll('.reveal');
    const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
                
                if (entry.target.querySelector('.counter')) {
                    animateCounters();
                }
            }
        });
    }, {
        threshold: 0.1
    });
    
    reveals.forEach(reveal => {
        revealObserver.observe(reveal);
    });
}

// Initialize all animations
document.addEventListener('DOMContentLoaded', function() {
    initScrollReveal();
    
    const elementsToReveal = document.querySelectorAll('.kesariya-card, .testimonial, .process-step');
    elementsToReveal.forEach(el => {
        el.classList.add('reveal');
    });
    
    // Close modal when clicking outside
    document.getElementById('product-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeProductModal();
        }
    });
    
    // Close lightbox when clicking outside
    document.getElementById('lightbox').addEventListener('click', function(e) {
        if (e.target === this) {
            closeLightbox();
        }
    });
    
    // Close lightbox with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeProductModal();
            closeLightbox();
        }
    });
    
    // Initialize testimonial carousel
    initTestimonialCarousel();
});
</script>
{% endblock %}